INSERT INTO pbxfunctions (name, pf_type, context, extension, priority) SELECT 'DTMF Test',  'dtmf_test', 'mor_pbxfunctions', 'dtmf_test', 1 FROM dual WHERE (SELECT COUNT(*) FROM pbxfunctions WHERE name = 'DTMF Test') = 0;
INSERT INTO pbxfunctions (name, pf_type, context, extension, priority) SELECT 'Check VoiceMail',  'check_voicemail', 'mor_pbxfunctions', 'check_voicemail', 1 FROM dual WHERE (SELECT COUNT(*) FROM pbxfunctions WHERE name = 'Check VoiceMail') = 0;
DELETE FROM didrates WHERE rate_type = 'user';
UPDATE calls SET did_billsec = billsec WHERE did_id > 0 AND billsec > 0 AND did_billsec != billsec;
INSERT INTO emails (name, template, date_created, subject, body, format) SELECT 'recording_new', 1, NOW(),'New recording',"New recording attached.\n\nCall done on <% calldate %>\nSource number(CallerID): <% source %>\nDialed to: <% destination %>\nCall duration: <% billsec %> seconds\n\nRegards", "plain" FROM dual WHERE (SELECT COUNT(*) FROM emails WHERE name = 'recording_new') = 0;
INSERT INTO emails (name, template, date_created, subject, body, format) SELECT 'recording_delete', 1, NOW(),'Recording deleted',"Recording was deleted from the server because there is not enough space to store it.\n\nRecording done for the call on: <% calldate %>\nSource number(CallerID): <% source %>\nDialed to: <% destination %>\nCall duration: <% billsec %> seconds\n\nRegards", "plain" FROM dual WHERE (SELECT COUNT(*) FROM emails WHERE name = 'recording_delete') = 0;
INSERT INTO translations (name, native_name, short_name, `position`, active, flag) SELECT 'Ukrainian', '', 'ua', 100, 1, 'ukr' FROM dual WHERE (SELECT COUNT(*) FROM translations WHERE name = 'Ukrainian') = 0;
UPDATE devices JOIN users ON (users.id = devices.user_id) SET devices.record_forced = devices.record WHERE users.recording_enabled = 0;
UPDATE devices JOIN users ON (users.id = devices.user_id) SET devices.record = 0 WHERE users.recording_enabled = 0;
INSERT INTO emails (name, template, date_created, subject, body, format) SELECT 'block_when_no_balance', 1, NOW(),'Account blocked',"Account was blocked because of insufficient balance\nUser: <%= full_name %>\nBalance: <%= balance %>", "plain" FROM dual WHERE (SELECT COUNT(*) FROM emails WHERE name = 'block_when_no_balance') = 0;
DELETE FROM conflines WHERE name = 'AD_Sounds_Folder';
INSERT INTO conflines(name, value, owner_id) VALUES ('AD_Sounds_Folder', '/home/mor/public/ad_sounds', 0);
UPDATE users SET vat_percent = 0;
UPDATE role_rights SET permission = 1 WHERE role_id = 8 and right_id = (SELECT id from rights where controller = 'devices' and rights.action = 'pdffaxemail_add' LIMIT 1);
UPDATE role_rights SET permission = 1 WHERE role_id = 8 and right_id = (SELECT id from rights where controller = 'devices' and rights.action = 'pdffaxemail_new' LIMIT 1);
UPDATE role_rights SET permission = 1 WHERE role_id = 8 and right_id = (SELECT id from rights where controller = 'devices' and rights.action = 'pdffaxemail_edit' LIMIT 1);
UPDATE role_rights SET permission = 1 WHERE role_id = 8 and right_id = (SELECT id from rights where controller = 'devices' and rights.action = 'pdffaxemail_update' LIMIT 1);
UPDATE role_rights SET permission = 1 WHERE role_id = 8 and right_id = (SELECT id from rights where controller = 'devices' and rights.action = 'pdffaxemail_destroy' LIMIT 1);

# silence ivr voice with files
INSERT INTO ivr_voices (voice,description, created_at) SELECT 'silence',  'Silence files for IVR', '2010-05-06 19:02:52' FROM dual WHERE (SELECT COUNT(*) FROM ivr_voices WHERE voice= 'silence') = 0;
INSERT INTO ivr_sound_files (ivr_voice_id,path, description, size) SELECT (SELECT id FROM ivr_voices WHERE voice = 'silence'),  'silence1.wav', '1 second of silence', 16046 FROM dual WHERE (SELECT COUNT(*) FROM ivr_sound_files WHERE path= 'silence1.wav') = 0;
INSERT INTO ivr_sound_files (ivr_voice_id,path, description, size) SELECT (SELECT id FROM ivr_voices WHERE voice = 'silence'),  'silence2.wav', '2 seconds of silence', 32046 FROM dual WHERE (SELECT COUNT(*) FROM ivr_sound_files WHERE path= 'silence2.wav') = 0;
INSERT INTO ivr_sound_files (ivr_voice_id,path, description, size) SELECT (SELECT id FROM ivr_voices WHERE voice = 'silence'),  'silence3.wav', '3 seconds of silence', 48046 FROM dual WHERE (SELECT COUNT(*) FROM ivr_sound_files WHERE path= 'silence3.wav') = 0;
INSERT INTO ivr_sound_files (ivr_voice_id,path, description, size) SELECT (SELECT id FROM ivr_voices WHERE voice = 'silence'),  'silence4.wav', '4 seconds of silence', 64046 FROM dual WHERE (SELECT COUNT(*) FROM ivr_sound_files WHERE path= 'silence4.wav') = 0;
INSERT INTO ivr_sound_files (ivr_voice_id,path, description, size) SELECT (SELECT id FROM ivr_voices WHERE voice = 'silence'),  'silence5.wav', '5 seconds of silence', 80046 FROM dual WHERE (SELECT COUNT(*) FROM ivr_sound_files WHERE path= 'silence5.wav') = 0;
INSERT INTO ivr_sound_files (ivr_voice_id,path, description, size) SELECT (SELECT id FROM ivr_voices WHERE voice = 'silence'),  'silence6.wav', '6 seconds of silence', 96046 FROM dual WHERE (SELECT COUNT(*) FROM ivr_sound_files WHERE path= 'silence6.wav') = 0;
INSERT INTO ivr_sound_files (ivr_voice_id,path, description, size) SELECT (SELECT id FROM ivr_voices WHERE voice = 'silence'),  'silence7.wav', '7 seconds of silence', 112046 FROM dual WHERE (SELECT COUNT(*) FROM ivr_sound_files WHERE path= 'silence7.wav') = 0;
INSERT INTO ivr_sound_files (ivr_voice_id,path, description, size) SELECT (SELECT id FROM ivr_voices WHERE voice = 'silence'),  'silence8.wav', '8 seconds of silence', 128046 FROM dual WHERE (SELECT COUNT(*) FROM ivr_sound_files WHERE path= 'silence8.wav') = 0;
INSERT INTO ivr_sound_files (ivr_voice_id,path, description, size) SELECT (SELECT id FROM ivr_voices WHERE voice = 'silence'),  'silence9.wav', '9 seconds of silence', 144046 FROM dual WHERE (SELECT COUNT(*) FROM ivr_sound_files WHERE path= 'silence9.wav') = 0;
INSERT INTO ivr_sound_files (ivr_voice_id,path, description, size) SELECT (SELECT id FROM ivr_voices WHERE voice = 'silence'),  'silence10.wav', '10 seconds of silence', 160046 FROM dual WHERE (SELECT COUNT(*) FROM ivr_sound_files WHERE path= 'silence10.wav') = 0;

INSERT INTO rights(controller, action, description) SELECT 'ivr', 'update_voice', 'Ivr_update_voice' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'update_voice') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'update_sound_file', 'Ivr_update_sound_file' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'update_sound_file') = 0;
 INSERT INTO rights(controller, action, description) SELECT 'ivr', 'edit_voice', 'Ivr_edit_voice' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'edit_voice') = 0;
 INSERT INTO rights(controller, action, description) SELECT 'ivr', 'play_sound', 'Ivr_play_sound' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'play_sound') = 0;
  INSERT INTO rights(controller, action, description) SELECT 'ivr', 'edit_sound_file', 'Ivr_sound_file' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'edit_sound_file') = 0;
  INSERT INTO rights(controller, action, description) SELECT 'ivr', 'destroy_sound_file', 'Ivr_destroy_sound_file' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'destroy_sound_file') = 0;
  
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 8, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 8 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_voice' LIMIT 1)) = 0;
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 8, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 8 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_sound_file' LIMIT 1)) = 0;
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 8, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 8 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_voice' LIMIT 1)) = 0;
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 8, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'play_sound' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 8 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'play_sound' LIMIT 1)) = 0;
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 8, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 8 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_sound_file' LIMIT 1)) = 0;
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 8, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 8 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_sound_file' LIMIT 1)) = 0;
  
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 9, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 9 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_voice' LIMIT 1)) = 0;
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 9, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 9 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_sound_file' LIMIT 1)) = 0;
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 9, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 9 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_voice' LIMIT 1)) = 0;
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 9, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'play_sound' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 9 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'play_sound' LIMIT 1)) = 0;
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 9, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 9 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_sound_file' LIMIT 1)) = 0;
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 9, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 9 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_sound_file' LIMIT 1)) = 0;
  
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 17, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 17 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_voice' LIMIT 1)) = 0;
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 17, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 17 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_sound_file' LIMIT 1)) = 0;
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 17, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 8 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_voice' LIMIT 1)) = 0;
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 17, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'play_sound' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 17 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'play_sound' LIMIT 1)) = 0;
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 17, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 17 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_sound_file' LIMIT 1)) = 0;
  INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, 17, (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = 17 AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_sound_file' LIMIT 1)) = 0;
  
  UPDATE role_rights SET permission  = 0 WHERE role_id = 8 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'edit_voice' LIMIT 1);
  UPDATE role_rights SET permission  = 0 WHERE role_id = 8 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'play_sound' LIMIT 1);
  UPDATE role_rights SET permission  = 0 WHERE role_id = 8 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'edit_sound_file' LIMIT 1);
  UPDATE role_rights SET permission  = 0 WHERE role_id = 8 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'destroy_sound_file' LIMIT 1);
  UPDATE role_rights SET permission  = 0 WHERE role_id = 9 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'edit_voice' LIMIT 1);
  UPDATE role_rights SET permission  = 0 WHERE role_id = 9 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'play_sound' LIMIT 1);
  UPDATE role_rights SET permission  = 0 WHERE role_id = 9 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'edit_sound_file' LIMIT 1);
  UPDATE role_rights SET permission  = 0 WHERE role_id = 9 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'destroy_sound_file' LIMIT 1);
  UPDATE role_rights SET permission  = 0 WHERE role_id = 17 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'edit_voice' LIMIT 1);
  UPDATE role_rights SET permission  = 0 WHERE role_id = 17 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'play_sound' LIMIT 1);
  UPDATE role_rights SET permission  = 0 WHERE role_id = 17 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'edit_sound_file' LIMIT 1);
  UPDATE role_rights SET permission  = 0 WHERE role_id = 17 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'destroy_sound_file' LIMIT 1);
  UPDATE role_rights SET permission  = 0 WHERE role_id = 17 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'edit_voice' LIMIT 1);
  UPDATE role_rights SET permission  = 0 WHERE role_id = 17 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'play_sound' LIMIT 1);
  UPDATE role_rights SET permission  = 0 WHERE role_id = 17 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'edit_sound_file' LIMIT 1);
  UPDATE role_rights SET permission  = 0 WHERE role_id = 17 AND right_id = (SELECT id from rights where controller = 'ivr' and rights.action = 'destroy_sound_file' LIMIT 1);

INSERT INTO acc_rights (name, nice_name, permission_group) SELECT 'cli_ivr', 'IVR', 'CLI' FROM dual WHERE (SELECT COUNT(*) FROM acc_rights WHERE name= 'cli_ivr') = 0;


#just in case
update currencies set exchange_rate = 1 where id = 1;

UPDATE users SET blocked = 1 WHERE id = 2;

INSERT INTO rights(controller, action, description) SELECT 'ivr', 'index', 'ivr_index' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'index') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'list', 'ivr_list' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'list') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'list_voice', 'ivr_list_voice' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'list_voice') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'new_voice', 'ivr_new_voice' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'new_voice') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'create_voice', 'ivr_create_voice' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'create_voice') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'destroy_voice', 'ivr_destroy_voice' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'destroy_voice') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'edit_voice', 'ivr_edit_voice' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'edit_voice') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'update_voice', 'ivr_update_voice' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'update_voice') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'new_sound_file', 'ivr_new_sound_file' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'new_sound_file') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'create_sound_file', 'ivr_create_sound_file' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'create_sound_file') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'destroy_sound_file', 'ivr_destroy_sound_file' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'destroy_sound_file') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'play_sound', 'ivr_play_sound' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'play_sound') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'edit_sound_file', 'ivr_edit_sound_file' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'edit_sound_file') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'update_sound_file', 'ivr_update_sound_file' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'update_sound_file') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'list_timeperiod', 'ivr_list_timeperiod' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'list_timeperiod') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'new_timeperiod', 'ivr_new_timeperiod' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'new_timeperiod') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'create_timeperiod', 'ivr_create_timeperiod' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'create_timeperiod') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'destroy_timeperiod', 'ivr_destroy_timeperiod' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'destroy_timeperiod') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'edit_timeperiod', 'ivr_edit_timeperiod' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'edit_timeperiod') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'update_timeperiod', 'ivr_update_timeperiod' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'update_timeperiod') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'settings', 'ivr_settings' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'settings') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'settings_change', 'ivr_settings_change' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'settings_change') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'list_ivr', 'ivr_list_ivr' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'list_ivr') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'new_ivr', 'ivr_new_ivr' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'new_ivr') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'create_ivr', 'ivr_create_ivr' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'create_ivr') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'edit_ivr', 'ivr_edit_ivr' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'edit_ivr') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'action_params', 'ivr_action_params' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'action_params') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'update_block_name', 'ivr_update_block_name' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'update_block_name') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'update_ivr_name', 'ivr_update_ivr_name' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'update_ivr_name') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'update_block_timeout_digits', 'ivr_update_block_timeout_digits' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'update_block_timeout_digits') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'update_block_timeout_response', 'ivr_update_block_timeout_response' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'update_block_timeout_response') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'update_data1', 'ivr_update_data1' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'update_data1') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'update_data2', 'ivr_update_data2' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'update_data2') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'extension_extent', 'ivr_extension_extent' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'extension_extent') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'extension_block', 'ivr_extension_block' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'extension_block') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'add_ivr_action', 'ivr_add_ivr_action' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'add_ivr_action') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'add_ivr_extension', 'ivr_add_ivr_extension' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'add_ivr_extension') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'add_block', 'ivr_add_block' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'add_block') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'refresh_edit_window', 'ivr_refresh_edit_window' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'refresh_edit_window') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'change_block', 'ivr_change_block' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'change_block') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'ivr_extlines', 'ivr_ivr_extlines' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'ivr_extlines') = 0;
INSERT INTO rights(controller, action, description) SELECT 'ivr', 'destroy_ivr', 'ivr_destroy_ivr' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'ivr' and action = 'destroy_ivr') = 0;

INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'index' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'index')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'index' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'index')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list_voice')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list_voice')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_voice')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_voice')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_voice')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_voice')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_voice')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_voice')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_voice')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_voice')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_voice')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_voice' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_voice')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_sound_file')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_sound_file')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_sound_file')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_sound_file')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_sound_file')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_sound_file')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'play_sound' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'play_sound')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'play_sound' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'play_sound')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_sound_file')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_sound_file')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_sound_file')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_sound_file' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_sound_file')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list_timeperiod' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list_timeperiod')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list_timeperiod' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list_timeperiod')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_timeperiod' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_timeperiod')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_timeperiod' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_timeperiod')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_timeperiod' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_timeperiod')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_timeperiod' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_timeperiod')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_timeperiod' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_timeperiod')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_timeperiod' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_timeperiod')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_timeperiod' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_timeperiod')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_timeperiod' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_timeperiod')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_timeperiod' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_timeperiod')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_timeperiod' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_timeperiod')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'settings' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'settings')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'settings' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'settings')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'settings_change' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'settings_change')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'settings_change' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'settings_change')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list_ivr' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list_ivr')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list_ivr' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'list_ivr')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_ivr' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_ivr')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_ivr' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'new_ivr')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_ivr' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_ivr')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_ivr' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'create_ivr')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_ivr' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_ivr')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_ivr' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'edit_ivr')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'action_params' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'action_params')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'action_params' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'action_params')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_block_name' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_block_name')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_block_name' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_block_name')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_ivr_name' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_ivr_name')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_ivr_name' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_ivr_name')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_block_timeout_digits' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_block_timeout_digits')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_block_timeout_digits' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_block_timeout_digits')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_block_timeout_response' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_block_timeout_response')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_block_timeout_response' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_block_timeout_response')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_data1' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_data1')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_data1' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_data1')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_data2' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_data2')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_data2' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'update_data2')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'extension_extent' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'extension_extent')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'extension_extent' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'extension_extent')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'extension_block' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'extension_block')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'extension_block' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'extension_block')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'add_ivr_action' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'add_ivr_action')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'add_ivr_action' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'add_ivr_action')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'add_ivr_extension' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'add_ivr_extension')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'add_ivr_extension' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'add_ivr_extension')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'add_block' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'add_block')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'add_block' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'add_block')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'refresh_edit_window' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'refresh_edit_window')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'refresh_edit_window' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'refresh_edit_window')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'change_block' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'change_block')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'change_block' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'change_block')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'ivr_extlines' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'ivr_extlines')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'ivr_extlines' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'ivr_extlines')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_ivr' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_ivr')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_ivr' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'ivr' AND rights.action = 'destroy_ivr')) = 0;

UPDATE role_rights SET permission = 0 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user','reseller')) and right_id IN (SELECT id from rights where controller = 'ivr' and rights.action IN ('index','list','list_voice','new_voice','create_voice','destroy_voice','edit_voice','update_voice','new_sound_file','create_sound_file','destroy_sound_file','play_sound','edit_sound_file','update_sound_file','list_timeperiod','new_timeperiod','create_timeperiod','destroy_timeperiod','edit_timeperiod','update_timeperiod','settings','settings_change','list_ivr','new_ivr','create_ivr','edit_ivr','action_params','update_block_name','update_ivr_name','update_block_timeout_digits','update_block_timeout_response','update_data1','update_data2','extension_extent','extension_block','add_ivr_action','add_ivr_extension','add_block','refresh_edit_window','change_block','ivr_extlines','destroy_ivr'));
INSERT INTO rights(controller, action, description) SELECT 'stats', 'action_log', 'stats_action_log' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'action_log') = 0;                                                                                                                
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'action_log' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id IN (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'action_log')) = 0;               
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'stats' and rights.action IN ('action_log'));
INSERT INTO rights(controller, action, description) SELECT 'cards', 'card_buy', 'cards_card_buy' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'cards' and action = 'card_buy') = 0;
INSERT INTO rights(controller, action, description) SELECT 'cards', 'card_buy_finish', 'cards_card_buy_finish' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'cards' and action = 'card_buy_finish') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'cards' AND rights.action = 'card_buy' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'cards' AND rights.action = 'card_buy')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'cards' AND rights.action = 'card_buy_finish' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'cards' AND rights.action = 'card_buy_finish')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'cards' and rights.action IN ('card_buy','card_buy_finish'));
INSERT INTO rights(controller, action, description) SELECT 'calls', 'call_info', 'calls_call_info' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'calls' and action = 'call_info') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'calls' AND rights.action = 'call_info' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'calls' AND rights.action = 'call_info')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'calls' and rights.action IN ('call_info'));
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_device_add', 'devices_cli_device_add' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_device_add') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_add' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id IN (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_add')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'devices' and rights.action IN ('cli_device_add'));
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_device_add', 'devices_cli_device_add' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_device_add') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_add' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id IN (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_add')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'devices' and rights.action IN ('cli_device_add'));
INSERT INTO rights(controller, action, description) SELECT 'functions', 'test_file_upload', 'functions_test_file_upload' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'functions' and action = 'test_file_upload') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'functions' AND rights.action = 'test_file_upload' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'functions' AND rights.action = 'test_file_upload')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'functions' and rights.action IN ('test_file_upload'));
INSERT INTO rights(controller, action, description) SELECT 'functions', 'send_test_email', 'functions_send_test_email' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'functions' and action = 'send_test_email') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'functions' AND rights.action = 'send_test_email' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id IN (SELECT id FROM rights WHERE rights.controller = 'functions' AND rights.action = 'send_test_email')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'functions' and rights.action IN ('send_test_email'));
INSERT INTO rights(controller, action, description) SELECT 'accounting', 'generate_invoices_to_prepaid_users', 'accounting_generate_invoices_to_prepaid_users' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'accounting' and action = 'generate_invoices_to_prepaid_users') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'accounting' AND rights.action = 'generate_invoices_to_prepaid_users' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'accounting' AND rights.action = 'generate_invoices_to_prepaid_users')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'accounting' and rights.action IN ('generate_invoices_to_prepaid_users'));
INSERT INTO rights(controller, action, description) SELECT 'accounting', 'generate_invoices_to_prepaid_users', 'accounting_generate_invoices_to_prepaid_users' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'accounting' and action = 'generate_invoices_to_prepaid_users') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'accounting' AND rights.action = 'generate_invoices_to_prepaid_users' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'accounting' AND rights.action = 'generate_invoices_to_prepaid_users')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'accounting' and rights.action IN ('generate_invoices_to_prepaid_users'));
INSERT INTO rights(controller, action, description) SELECT 'devices', 'change_email_callback_status_device', 'devices_change_email_callback_status_device' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'change_email_callback_status_device') = 0;
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_device_edit', 'devices_cli_device_edit' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_device_edit') = 0;
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_device_update', 'devices_cli_device_update' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_device_update') = 0;
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_user_add', 'devices_cli_user_add' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_user_add') = 0;
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_user_edit', 'devices_cli_user_edit' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_user_edit') = 0;
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_user_update', 'devices_cli_user_update' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_user_update') = 0;
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_device_delete', 'devices_cli_device_delete' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_device_delete') = 0;
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_user_delete', 'devices_cli_user_delete' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_user_delete') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'change_email_callback_status_device' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'change_email_callback_status_device')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_edit' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_edit')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_update' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_update')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_add' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_add')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_edit' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_edit')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_update' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_update')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_delete' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_delete')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_delete' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_delete')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'devices' and rights.action IN ('change_email_callback_status_device','cli_device_edit','cli_device_update','cli_user_add','cli_user_edit','cli_user_update','cli_device_delete','cli_user_delete'));
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_user_add', 'devices_cli_user_add' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_user_add') = 0;
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_user_edit', 'devices_cli_user_edit' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_user_edit') = 0;
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_user_update', 'devices_cli_user_update' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_user_update') = 0;
INSERT INTO rights(controller, action, description) SELECT 'devices', 'user_device_edit', 'devices_user_device_edit' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'user_device_edit') = 0;
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_user_delete', 'devices_cli_user_delete' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_user_delete') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_add' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_add')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_edit' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_edit')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_update' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_update')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'user_device_edit' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'user_device_edit')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_delete' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_user_delete')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'devices' and rights.action IN ('cli_user_add','cli_user_edit','cli_user_update','user_device_edit','cli_user_delete'));
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_device_edit', 'devices_cli_device_edit' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_device_edit') = 0;
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_device_update', 'devices_cli_device_update' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_device_update') = 0;
INSERT INTO rights(controller, action, description) SELECT 'devices', 'cli_device_delete', 'devices_cli_device_delete' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'cli_device_delete') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_edit' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_edit')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_update' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_update')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_delete' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'cli_device_delete')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'devices' and rights.action IN ('cli_device_edit','cli_device_update','cli_device_delete'));
INSERT INTO rights(controller, action, description) SELECT 'functions', 'test_file_upload', 'functions_test_file_upload' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'functions' and action = 'test_file_upload') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'functions' AND rights.action = 'test_file_upload' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'functions' AND rights.action = 'test_file_upload')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'functions' and rights.action IN ('test_file_upload'));
INSERT INTO rights(controller, action, description) SELECT 'accounting', 'generate_invoices_status_for_prepaid_users', 'accounting_generate_invoices_status_for_prepaid_users' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'accounting' and action = 'generate_invoices_status_for_prepaid_users') = 0;
INSERT INTO rights(controller, action, description) SELECT 'accounting', 'generate_invoice_destinations_csv', 'accounting_generate_invoice_destinations_csv' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'accounting' and action = 'generate_invoice_destinations_csv') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'accounting' AND rights.action = 'generate_invoices_status_for_prepaid_users' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'accounting' AND rights.action = 'generate_invoices_status_for_prepaid_users')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'accounting' AND rights.action = 'generate_invoice_destinations_csv' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'accounting' AND rights.action = 'generate_invoice_destinations_csv')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'accounting' and rights.action IN ('generate_invoices_status_for_prepaid_users','generate_invoice_destinations_csv'));
INSERT INTO rights(controller, action, description) SELECT 'devices', 'user_device_update', 'devices_user_device_update' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'user_device_update') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'user_device_update' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'user_device_update')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'devices' and rights.action IN ('user_device_update'));
INSERT INTO rights(controller, action, description) SELECT 'payments', 'ouroboros', 'payments_ouroboros' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'payments' and action = 'ouroboros') = 0;
INSERT INTO rights(controller, action, description) SELECT 'payments', 'ouroboros_pay', 'payments_ouroboros_pay' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'payments' and action = 'ouroboros_pay') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'payments' AND rights.action = 'ouroboros' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'payments' AND rights.action = 'ouroboros')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'payments' AND rights.action = 'ouroboros_pay' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'payments' AND rights.action = 'ouroboros_pay')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'payments' and rights.action IN ('ouroboros','ouroboros_pay'));
INSERT INTO rights(controller, action, description) SELECT 'payments', 'ouroboros', 'payments_ouroboros' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'payments' and action = 'ouroboros') = 0;
INSERT INTO rights(controller, action, description) SELECT 'payments', 'ouroboros_pay', 'payments_ouroboros_pay' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'payments' and action = 'ouroboros_pay') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'payments' AND rights.action = 'ouroboros' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'payments' AND rights.action = 'ouroboros')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'payments' AND rights.action = 'ouroboros_pay' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'payments' AND rights.action = 'ouroboros_pay')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'payments' and rights.action IN ('ouroboros','ouroboros_pay'));
INSERT INTO rights(controller, action, description) SELECT 'recordings', 'list_recordings', 'recordings_list_recordings' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'recordings' and action = 'list_recordings') = 0;
INSERT INTO rights(controller, action, description) SELECT 'recordings', 'destroy', 'recordings_destroy' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'recordings' and action = 'destroy') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'recordings' AND rights.action = 'list_recordings' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'recordings' AND rights.action = 'list_recordings')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'recordings' AND rights.action = 'destroy' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'recordings' AND rights.action = 'destroy')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'recordings' and rights.action IN ('list_recordings','destroy'));
INSERT INTO rights(controller, action, description) SELECT 'recordings', 'list_users', 'recordings_list_users' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'recordings' and action = 'list_users') = 0;
INSERT INTO rights(controller, action, description) SELECT 'recordings', 'list_users_update', 'recordings_list_users_update' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'recordings' and action = 'list_users_update') = 0;
INSERT INTO rights(controller, action, description) SELECT 'recordings', 'list_recordings', 'recordings_list_recordings' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'recordings' and action = 'list_recordings') = 0;
INSERT INTO rights(controller, action, description) SELECT 'recordings', 'play_recording', 'recordings_play_recording' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'recordings' and action = 'play_recording') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'recordings' AND rights.action = 'list_users' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'recordings' AND rights.action = 'list_users')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'recordings' AND rights.action = 'list_users_update' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'recordings' AND rights.action = 'list_users_update')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'recordings' AND rights.action = 'list_recordings' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'recordings' AND rights.action = 'list_recordings')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'recordings' AND rights.action = 'play_recording' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'recordings' AND rights.action = 'play_recording')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'recordings' and rights.action IN ('list_users','list_users_update','list_recordings','play_recording'));
INSERT INTO rights(controller, action, description) SELECT 'sms', 'sms_list', 'sms_sms_list' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'sms_list') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'sms', 'sms_sms' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'sms') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'send_sms', 'sms_send_sms' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'send_sms') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'sms_list' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'sms_list')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'sms' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'sms')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'send_sms' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'send_sms')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'sms' and rights.action IN ('sms_list','sms','send_sms'));
INSERT INTO rights(controller, action, description) SELECT 'sms', 'sms_list', 'sms_sms_list' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'sms_list') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'sms', 'sms_sms' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'sms') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'send_sms', 'sms_send_sms' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'send_sms') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'sms_list' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'sms_list')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'sms' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'sms')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'send_sms' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'send_sms')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'sms' and rights.action IN ('sms_list','sms','send_sms'));
INSERT INTO rights(controller, action, description) SELECT 'sms', 'sms_list', 'sms_sms_list' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'sms_list') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'sms', 'sms_sms' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'sms') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'send_sms', 'sms_send_sms' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'send_sms') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'tariff_edit', 'sms_tariff_edit' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'tariff_edit') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'rates', 'sms_rates' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'rates') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'delete_all_rates', 'sms_delete_all_rates' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'delete_all_rates') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'form_sms', 'sms_form_sms' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'form_sms') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'users', 'sms_users' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'users') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'user_subscribe_to_sms', 'sms_user_subscribe_to_sms' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'user_subscribe_to_sms') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'tariffs', 'sms_tariffs' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'tariffs') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'sms_list' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'sms_list')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'sms' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'sms')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'send_sms' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'send_sms')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'tariff_edit' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'tariff_edit')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'rates' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'rates')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'delete_all_rates' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'delete_all_rates')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'form_sms' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'form_sms')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'users' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'users')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'user_subscribe_to_sms' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'user_subscribe_to_sms')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'tariffs' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'tariffs')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'sms' and rights.action IN ('sms_list','sms','send_sms','tariff_edit','rates','delete_all_rates','form_sms','users','user_subscribe_to_sms','tariffs'));
INSERT INTO rights(controller, action, description) SELECT 'sms', 'tariff_new', 'sms_tariff_new' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'tariff_new') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'tariff_create', 'sms_tariff_create' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'tariff_create') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'rate_new', 'sms_rate_new' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'rate_new') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'rate_try_to_add', 'sms_rate_try_to_add' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'rate_try_to_add') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'rates_update', 'sms_rates_update' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'rates_update') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'tariff_new' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'tariff_new')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'tariff_create' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'tariff_create')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'rate_new' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'rate_new')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'rate_try_to_add' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'rate_try_to_add')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'rates_update' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'rates_update')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'sms' and rights.action IN ('tariff_new','tariff_create','rate_new','rate_try_to_add','rates_update'));
INSERT INTO rights(controller, action, description) SELECT 'sms', 'lcr_edit_user', 'sms_lcr_edit_user' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'lcr_edit_user') = 0;
INSERT INTO rights(controller, action, description) SELECT 'sms', 'lcr_update_user', 'sms_lcr_update_user' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'lcr_update_user') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'lcr_edit_user' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'lcr_edit_user')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'lcr_update_user' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'lcr_update_user')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'sms' and rights.action IN ('lcr_edit_user','lcr_update_user'));
INSERT INTO rights(controller, action, description) SELECT 'sms', 'user_rates', 'sms_user_rates' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'user_rates') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'user_rates' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'user_rates')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'sms' and rights.action IN ('user_rates'));
INSERT INTO rights(controller, action, description) SELECT 'tariffs', 'make_user_tariff_wholesale', 'tariffs_make_user_tariff_wholesale' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'tariffs' and action = 'make_user_tariff_wholesale') = 0;
INSERT INTO rights(controller, action, description) SELECT 'tariffs', 'make_user_tariff_status_wholesale', 'tariffs_make_user_tariff_status_wholesale' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'tariffs' and action = 'make_user_tariff_status_wholesale') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'tariffs' AND rights.action = 'make_user_tariff_wholesale' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'tariffs' AND rights.action = 'make_user_tariff_wholesale')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'tariffs' AND rights.action = 'make_user_tariff_status_wholesale' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'tariffs' AND rights.action = 'make_user_tariff_status_wholesale')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'tariffs' and rights.action IN ('make_user_tariff_wholesale','make_user_tariff_status_wholesale'));
INSERT INTO rights(controller, action, description) SELECT 'functions', 'tax_change', 'functions_tax_change' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'functions' and action = 'tax_change') = 0;                      
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'functions' AND rights.action = 'tax_change' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'functions' AND rights.action = 'tax_change')) = 0;             
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'functions' and rights.action IN ('tax_change')); 
INSERT INTO rights(controller, action, description) SELECT 'tariffs', 'user_rates_detailed', 'tariffs_user_rates_detailed' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'tariffs' and action = 'user_rates_detailed') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'tariffs' AND rights.action = 'user_rates_detailed' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'tariffs' AND rights.action = 'user_rates_detailed')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'tariffs' and rights.action IN ('user_rates_detailed'));
INSERT INTO rights(controller, action, description) SELECT 'sms', 'tariff_destroy', 'sms_tariff_destroy' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'sms' and action = 'tariff_destroy') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'tariff_destroy' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'sms' AND rights.action = 'tariff_destroy')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'sms' and rights.action IN ('tariff_destroy'));
INSERT INTO rights(controller, action, description) SELECT 'functions', 'check_separator', 'functions_check_separator' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'functions' and action = 'check_separator') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'functions' AND rights.action = 'check_separator' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'functions' AND rights.action = 'check_separator')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'functions' and rights.action IN ('check_separator'));
INSERT INTO rights(controller, action, description) SELECT 'dids', 'personal_dids', 'dids_personal_dids' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'dids' and action = 'personal_dids') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'dids' AND rights.action = 'personal_dids' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'dids' AND rights.action = 'personal_dids')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'dids' and rights.action IN ('personal_dids'));
INSERT INTO rights(controller, action, description) SELECT 'stats', 'dids', 'stats_dids' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'dids') = 0;
INSERT INTO rights(controller, action, description) SELECT 'stats', 'dids_usage', 'stats_dids_usage' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'dids_usage') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'dids' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'dids')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'dids_usage' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'dids_usage')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'stats' and rights.action IN ('dids','dids_usage'));
INSERT INTO rights(controller, action, description) SELECT 'tariffs', 'day_setup', 'tariffs_day_setup' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'tariffs' and action = 'day_setup') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'tariffs' AND rights.action = 'day_setup' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'tariffs' AND rights.action = 'day_setup')) = 0;
UPDATE role_rights SET permission = 0 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'tariffs' and rights.action IN ('day_setup'));
INSERT INTO rights(controller, action, description) SELECT 'dids', 'personal_dids', 'dids_personal_dids' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'dids' and action = 'personal_dids') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'dids' AND rights.action = 'personal_dids' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'dids' AND rights.action = 'personal_dids')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'dids' and rights.action IN ('personal_dids'));
INSERT INTO rights(controller, action, description) SELECT 'dids', 'personal_dids', 'dids_personal_dids' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'dids' and action = 'personal_dids') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'dids' AND rights.action = 'personal_dids' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'dids' AND rights.action = 'personal_dids')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'dids' and rights.action IN ('personal_dids'));
INSERT INTO rights(controller, action, description) SELECT 'stats', 'reseller_all_user_stats', 'stats_reseller_all_user_stats' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'reseller_all_user_stats') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'reseller_all_user_stats' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'reseller_all_user_stats')) = 0;
UPDATE role_rights SET permission = 0 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'stats' and rights.action IN ('reseller_all_user_stats'));
INSERT INTO rights(controller, action, description) SELECT 'stats', 'reseller_all_user_stats', 'stats_reseller_all_user_stats' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'reseller_all_user_stats') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'reseller_all_user_stats' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'reseller_all_user_stats')) = 0;
UPDATE role_rights SET permission = 0 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'stats' and rights.action IN ('reseller_all_user_stats'));
INSERT INTO rights(controller, action, description) SELECT 'stats', 'reseller_all_user_stats', 'stats_reseller_all_user_stats' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'reseller_all_user_stats') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'admin'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'reseller_all_user_stats' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'admin') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'reseller_all_user_stats')) = 0;
UPDATE role_rights SET permission = 0 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('admin')) and right_id IN (SELECT id from rights where controller = 'stats' and rights.action IN ('reseller_all_user_stats'));
INSERT INTO rights(controller, action, description) SELECT 'stats', 'reseller_all_user_stats', 'stats_reseller_all_user_stats' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'reseller_all_user_stats') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'reseller_all_user_stats' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'reseller_all_user_stats')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'stats' and rights.action IN ('reseller_all_user_stats'));
INSERT INTO rights(controller, action, description) SELECT 'groups', 'list', 'groups_list' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'groups' and action = 'list') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'groups' AND rights.action = 'list' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'groups' AND rights.action = 'list')) = 0;
UPDATE role_rights SET permission = 0 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'groups' and rights.action IN ('list'));
INSERT INTO rights(controller, action, description) SELECT 'accounting', 'invoices', 'accounting_invoices' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'accounting' and action = 'invoices') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'accounting' AND rights.action = 'invoices' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'accounting' AND rights.action = 'invoices')) = 0;
UPDATE role_rights SET permission = 0 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'accounting' and rights.action IN ('invoices'));
INSERT INTO rights(controller, action, description) SELECT 'stats', 'faxes_list', 'stats_faxes_list' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'faxes_list') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'faxes_list' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'faxes_list')) = 0;
UPDATE role_rights SET permission = 0 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'stats' and rights.action IN ('faxes_list'));
INSERT INTO rights(controller, action, description) SELECT 'devices', 'user_device_clis', 'devices_user_device_clis' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'user_device_clis') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'user_device_clis' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'user_device_clis')) = 0;
UPDATE role_rights SET permission = 0 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'devices' and rights.action IN ('user_device_clis'));
INSERT INTO rights(controller, action, description) SELECT 'cardgroups', 'loss_calls', 'cardgroups_loss_calls' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'cardgroups' and action = 'loss_calls') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'cardgroups' AND rights.action = 'loss_calls' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'cardgroups' AND rights.action = 'loss_calls')) = 0;
UPDATE role_rights SET permission = 0 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'cardgroups' and rights.action IN ('loss_calls'));
INSERT INTO rights(controller, action, description) SELECT 'stats', 'faxes_list', 'stats_faxes_list' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'faxes_list') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'faxes_list' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'faxes_list')) = 0;
UPDATE role_rights SET permission = 0 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'stats' and rights.action IN ('faxes_list'));
INSERT INTO rights(controller, action, description) SELECT 'devices', 'user_device_clis', 'devices_user_device_clis' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'user_device_clis') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'user_device_clis' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'user_device_clis')) = 0;
UPDATE role_rights SET permission = 0 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'devices' and rights.action IN ('user_device_clis'));
INSERT INTO rights(controller, action, description) SELECT 'groups', 'list', 'groups_list' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'groups' and action = 'list') = 0;
INSERT INTO rights(controller, action, description) SELECT 'groups', 'members', 'groups_members' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'groups' and action = 'members') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'groups' AND rights.action = 'list' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'groups' AND rights.action = 'list')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'groups' AND rights.action = 'members' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'groups' AND rights.action = 'members')) = 0;
UPDATE role_rights SET permission = 0 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'groups' and rights.action IN ('list','members'));
INSERT INTO rights(controller, action, description) SELECT 'cdr', 'import_csv', 'cdr_import_csv' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'cdr' and action = 'import_csv') = 0;
INSERT INTO rights(controller, action, description) SELECT 'cdr', 'rerating', 'cdr_rerating' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'cdr' and action = 'rerating') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'cdr' AND rights.action = 'import_csv' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'cdr' AND rights.action = 'import_csv')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'cdr' AND rights.action = 'rerating' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'cdr' AND rights.action = 'rerating')) = 0;
UPDATE role_rights SET permission = 0 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'cdr' and rights.action IN ('import_csv','rerating'));
INSERT INTO rights(controller, action, description) SELECT 'devices', 'devices_all', 'devices_devices_all' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'devices_all') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 0, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'devices_all' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 0 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'devices_all')) = 0;
UPDATE role_rights SET permission = 0 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'devices' and rights.action IN ('devices_all'));
INSERT INTO rights(controller, action, description) SELECT 'calls', 'aggregate', 'calls_aggregate' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'calls' and action = 'aggregate') = 0;
INSERT INTO rights(controller, action, description) SELECT 'calls', 'summary', 'calls_summary' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'calls' and action = 'summary') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'calls' AND rights.action = 'aggregate' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'calls' AND rights.action = 'aggregate')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'calls' AND rights.action = 'summary' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'calls' AND rights.action = 'summary')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'calls' and rights.action IN ('aggregate','summary'));
INSERT INTO rights(controller, action, description) SELECT 'stats', 'prefix_finder', 'stats_prefix_finder' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'prefix_finder') = 0;
INSERT INTO rights(controller, action, description) SELECT 'stats', 'providers', 'stats_providers' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'providers') = 0;
INSERT INTO rights(controller, action, description) SELECT 'stats', 'subscriptions_stats', 'stats_subscriptions_stats' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'subscriptions_stats') = 0;
INSERT INTO rights(controller, action, description) SELECT 'stats', 'system_stats', 'stats_system_stats' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'system_stats') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'prefix_finder' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'prefix_finder')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'providers' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'providers')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'subscriptions_stats' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'subscriptions_stats')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'system_stats' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'system_stats')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'stats' and rights.action IN ('prefix_finder','providers','subscriptions_stats','system_stats'));
INSERT INTO rights(controller, action, description) SELECT 'recordings', 'list_recordings', 'recordings_list_recordings' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'recordings' and action = 'list_recordings') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'recordings' AND rights.action = 'list_recordings' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'recordings' AND rights.action = 'list_recordings')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'recordings' and rights.action IN ('list_recordings'));
INSERT INTO rights(controller, action, description) SELECT 'vouchers', 'bulk_management', 'vouchers_bulk_management' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'vouchers' and action = 'bulk_management') = 0;
INSERT INTO rights(controller, action, description) SELECT 'vouchers', 'vouchers_interval', 'vouchers_vouchers_interval' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'vouchers' and action = 'vouchers_interval') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'vouchers' AND rights.action = 'bulk_management' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'vouchers' AND rights.action = 'bulk_management')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'vouchers' AND rights.action = 'vouchers_interval' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'vouchers' AND rights.action = 'vouchers_interval')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'vouchers' and rights.action IN ('bulk_management','vouchers_interval'));
INSERT INTO rights(controller, action, description) SELECT 'stats', 'calls_by_scr', 'stats_calls_by_scr' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'calls_by_scr') = 0;
INSERT INTO rights(controller, action, description) SELECT 'stats', 'calls_per_day', 'stats_calls_per_day' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'calls_per_day') = 0;
INSERT INTO rights(controller, action, description) SELECT 'stats', 'load_stats', 'stats_load_stats' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'load_stats') = 0;
INSERT INTO rights(controller, action, description) SELECT 'stats', 'first_activity', 'stats_first_activity' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'first_activity') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'calls_by_scr' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'calls_by_scr')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'calls_per_day' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'calls_per_day')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'load_stats' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'load_stats')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'first_activity' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'first_activity')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'stats' and rights.action IN ('calls_by_scr','calls_per_day','load_stats','first_activity'));
INSERT INTO rights(controller, action, description) SELECT 'devices', 'user_device_edit', 'devices_user_device_edit' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'user_device_edit') = 0;
INSERT INTO rights(controller, action, description) SELECT 'devices', 'user_device_update', 'devices_user_device_update' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'user_device_update') = 0;
INSERT INTO rights(controller, action, description) SELECT 'devices', 'user_device_clis', 'devices_user_device_clis' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'devices' and action = 'user_device_clis') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'user_device_edit' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'user_device_edit')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'user_device_update' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'user_device_update')) = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'reseller'), (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'user_device_clis' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'reseller') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'devices' AND rights.action = 'user_device_clis')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('reseller')) and right_id IN (SELECT id from rights where controller = 'devices' and rights.action IN ('user_device_edit','user_device_update','user_device_clis'));
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'devices' and rights.action IN ('user_device_clis'));
INSERT INTO rights(controller, action, description) SELECT 'vouchers', 'vouchers_list_to_csv', 'vouchers_vouchers_list_to_csv' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'vouchers' and action = 'vouchers_list_to_csv') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'accountant'), (SELECT id FROM rights WHERE rights.controller = 'vouchers' AND rights.action = 'vouchers_list_to_csv' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE permission = 1 AND role_id = (SELECT id FROM roles WHERE name = 'accountant') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'vouchers' AND rights.action = 'vouchers_list_to_csv')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('accountant')) and right_id IN (SELECT id from rights where controller = 'vouchers' and rights.action IN ('vouchers_list_to_csv'));
INSERT INTO rights(controller, action, description) SELECT 'stats', 'faxes_list', 'stats_faxes_list' FROM dual WHERE (SELECT COUNT(*) FROM rights WHERE controller = 'stats' and action = 'faxes_list') = 0;
INSERT INTO role_rights(permission, role_id, right_id) SELECT 1, (SELECT id FROM roles WHERE name = 'user'), (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'faxes_list' LIMIT 1) FROM dual WHERE (SELECT COUNT(*) FROM role_rights WHERE role_id = (SELECT id FROM roles WHERE name = 'user') AND right_id = (SELECT id FROM rights WHERE rights.controller = 'stats' AND rights.action = 'faxes_list')) = 0;
UPDATE role_rights SET permission = 1 WHERE role_id IN (SELECT id FROM roles WHERE name IN ('user')) and right_id IN (SELECT id from rights where controller = 'stats' and rights.action IN ('faxes_list'));
UPDATE conflines set value = '' WHERE name = 'Last_Crash_Exception_Class';
UPDATE devices SET insecure = NULL WHERE id = 2;
